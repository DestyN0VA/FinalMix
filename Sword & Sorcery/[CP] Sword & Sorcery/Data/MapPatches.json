{
  "Changes": [
    // Val'S TENT 
    {
      "LogName": "Beach Tent Warp",
      "Action": "EditMap",
      "Target": "Maps/EastScarp_Village",
      "FromFile": "assets/Maps/EastScarp_ValTent1.tmx",
      "ToArea": {
        "X": 89,
        "Y": 85,
        "Width": 9,
        "Height": 12
      },
      "MapTiles": [
        {
          "Position": {
            "X": 93,
            "Y": 93
          },
          "Layer": "Buildings",
          "SetProperties": {
            "Action": "Warp 4 9 EastScarp_ValHome"
          }
        },
        {
          "Position": {
            "X": 94,
            "Y": 93
          },
          "Layer": "Buildings",
          "SetProperties": {
            "Action": "Warp 4 9 EastScarp_ValHome"
          }
        }
      ],
      "When": { "HasFlag |contains=Val_SpecialOrders_BuildGuildMail": false }
    },
    // COASTAL GUILD STEP 1
    {
      "LogName": "Beach Guild Warp",
      "Action": "EditMap",
      "Target": "Maps/EastScarp_Village",
      "FromFile": "Assets/Maps/EastScarp_CoastalGuild1.tmx",
      "ToArea": {
        "X": 89,
        "Y": 85,
        "Width": 9,
        "Height": 12
      },
      "MapTiles": [
        {
          "Position": {
            "X": 93,
            "Y": 93
          },
          "Layer": "Buildings",
          "SetProperties": {
            "Action": "LockedDoorWarp 10 19 EastScarp_CoastalGuild 800 2200"
          }
        },
        {
          "Position": {
            "X": 94,
            "Y": 93
          },
          "Layer": "Buildings",
          "SetProperties": {
            "Action": "LockedDoorWarp 10 19 EastScarp_CoastalGuild 800 2200"
          }
        }
      ],
      "When": {
        "HasFlag |contains=Val_SpecialOrders_BuildGuildMail": true,
        "HasSeenEvent |contains=SnS.Ch5.Val.1": false
        
      }
    },
    // COASTAL GUILD STEP 2
    {
      "LogName": "Upgraded Guild Warp",
      "Action": "EditMap",
      "Target": "Maps/EastScarp_Village",
      "FromFile": "Assets/Maps/EastScarp_GuildFull.tmx",
      "ToArea": {
        "X": 89,
        "Y": 85,
        "Width": 9,
        "Height": 12
      },
      "MapTiles": [
        {
          "Position": {
            "X": 93,
            "Y": 93
          },
          "Layer": "Buildings",
          "SetProperties": {
            "Action": "LockedDoorWarp 10 19 EastScarp_CoastalGuild 800 2200"
          }
        }
      ],
      "When": { "HasSeenEvent |contains=SnS.Ch5.Val.1": true }
    },
    // EAST SCARP SPECIAL ORDER BOARD
    {
      "LogName": "Guild Board",
      "Action": "EditMap",
      "Target": "Maps/EastScarp_Village",
      "FromFile": "Assets/Maps/EastScarp_GuildBoard.tmx",
      "ToArea": {
        "X": 23,
        "Y": 81,
        "Width": 3,
        "Height": 2
      },
      "When": { "HasFlag |contains=Val_SpecialOrders_BuildGuildMail": true }
    },
    // Val SPACECORE WARP FIX
    {
      "LogName": "Patches ES to Guild",
      "Action": "EditMap",
      "Target": "Maps/EastScarp_Village",
      "Update": "OnLocationChange",
      "When": {
        "HasFlag |contains=Val_SpecialOrders_BuildGuildMail": true
      },
      "TextOperations": [
        {
          "Operation": "Append",
          "Target": [
            "MapProperties",
            "NPCWarp"
          ],
          "Value": "93 93 EastScarp_CoastalGuild 10 19",
          "Delimiter": " "
        },
        {
          "Operation": "Append",
          "Target": [
            "MapProperties",
            "NPCWarp"
          ],
          "Value": "94 93 EastScarp_CoastalGuild 10 19",
          "Delimiter": " "
        }
      ]
    },
    // MATEO SPACECORE FIX 
    {
      "LogName": "Patches ES to Guild",
      "Action": "EditMap",
      "Target": "Maps/EastScarp_Village",
      "Update": "OnLocationChange",
      "When": {
        "HasFlag |contains=Mateo_SpecialOrders_BuildGuildMail": true
      },
      "TextOperations": [
        {
          "Operation": "Append",
          "Target": [
            "MapProperties",
            "NPCWarp"
          ],
          "Value": "93 93 EastScarp_CoastalGuild 10 19",
          "Delimiter": " "
        },
        {
          "Operation": "Append",
          "Target": [
            "MapProperties",
            "NPCWarp"
          ],
          "Value": "94 93 EastScarp_CoastalGuild 10 19",
          "Delimiter": " "
        }
      ]
    },
    // PATCHES THE DRUID'S TOWER
    {
      "LogName": "Deep Mountains Northwest",
      "Action": "EditMap",
      "Target": "Maps/EastScarp_DeepMountains",
      "FromFile": "Assets/Maps/DN.SnS_DeepMountains.tmx",
      "ToArea": {
        "X": 0,
        "Y": 0,
        "Width": 122,
        "Height": 62
      },
    },
    // ADDS THE TOWER DOOR WARP
    {
      "Action": "EditMap",
      "Target": "Maps/EastScarp_DeepMountains",
      "MapTiles": [
        {
          "Position": {
            "X": 9,
            "Y": 16
          },
          "Layer": "Buildings",
          "SetProperties": {
            "Action": "Warp 6 28 EastScarp_DruidTower"
          }
        }
      ],
      "When": { "HasSeenEvent |contains=SnS.Ch2.Hector.1": true }
    },
    // ADDS A LOCKED DOOR TO THE TOWER 
    {
      "Action": "EditMap",
      "Target": "Maps/EastScarp_DeepMountains",
      "MapTiles": [
        {
          "Position": {
            "X": 9,
            "Y": 16
          },
          "Layer": "Buildings",
          "SetProperties": {
            "Action": "Message PassiveAggressiveDoor"
          }
        }
      ],
      "When": { "HasSeenEvent |contains=SnS.Ch2.Hector.1": false }
    },
    {
      "Action": "EditMap",
      "Target": "Maps/EastScarp_DeepMountains",
      "MapTiles": [
        {
          "Position": {
            "X": 9,
            "Y": 16
          },
          "Layer": "Buildings",
          "SetProperties": {
            "Action": "Warp 6 28 EastScarp_DruidTower"
          }
        }
      ],
      "When": { "HasSeenEvent |contains=SnS.Ch2.Hector.1": true }
    },
    // ADDS A LOCKED DOOR TO ROSALION'S HOUSE
    {
      "Action": "EditMap",
      "Target": "Maps/EastScarp_DeepMountains",
      "MapTiles": [
        {
          "Position": {
            "X": 40,
            "Y": 14
          },
          "Layer": "Buildings",
          "SetProperties": {
            "Action": "Message PassiveAggressiveDoor"
          }
        }
      ],
      "When": { "HasSeenEvent |contains=ROSALIONEVENT": false }
    },
    {
      "Action": "EditMap",
      "Target": "Maps/EastScarp_DeepMountains",
      "MapTiles": [
        {
          "Position": {
            "X": 40,
            "Y": 14
          },
          "Layer": "Buildings",
          "SetProperties": {
            "Action": "Warp X Y ROSALIONINTERIOR"
          }
        }
      ],
      "When": { "HasSeenEvent |contains=ROSALIONEVENT": true }
    },
    // DUMPSTER WARP
    {
      "Action": "EditMap",
      "Target": "Maps/Railroad",
      "MapTiles": [
        {
          "Position": {
            "X": 28,
            "Y": 36
          },
          "Layer": "Back",
          "SetProperties": {
            "TouchAction": "MagicWarp EastScarp_DruidTower 6 17"
          }
        }
      ],
      "When": {
        "HasSeenEvent |contains=ROSALIONEVENT": true,
        "DumpsterWarp": true
      }
    },
    {
      "Action": "EditMap",
      "Target": "Maps/Railroad",
      "MapTiles": [
        {
          "Position": {
            "X": 29,
            "Y": 36
          },
          "Layer": "Back",
          "SetProperties": {
            "TouchAction": "MagicWarp EastScarp_DruidTower 6 17"
          }
        }
      ],
      "When": {
        "HasSeenEvent |contains=SnS.Ch2.Hector.1": true,
        "DumpsterWarp": true
      }
    },
    // PATCHES THE PIZZA VAN
    {
      "LogName": "Pizza Van",
      "Action": "EditMap",
      "Target": "Maps/EastScarp_Village",
      "FromFile": "Assets/Maps/PizzaVanPatch.tmx",
      "Priority": "Late",
      "PatchMode": "Overlay",
      "ToArea": {
        "X": 88,
        "Y": 77,
        "Width": 11,
        "Height": 6
      },
      "MapTiles": [
        {
          "Position": {
            "X": 90,
            "Y": 81
          },
          "Layer": "Buildings",
          "SetProperties": {
            "Action": "LockedDoorWarp 2 4 EastScarp_VanInterior 1000 2000"
          }
        },
        {
          "Position": {
            "X": 89,
            "Y": 81
          },
          "Layer": "Buildings",
          "SetProperties": {
            "Action": "LockedDoorWarp 2 4 EastScarp_VanInterior 1000 2000"
          }
        }
      ],
      "When": {
        "HasSeenEvent |contains=SnS.Ch3.Cirrus.1": true,
        "HasSeenEvent |contains=SnS.Ch3.Cirrus.13": false
      }
    },
    // PATCHES CIRRUS' HOUSE
    {
      "LogName": "Cirrus'dsddwswwsswddddddewssxss",
      "Action": "EditMap",
      "Target": "Maps/EastScarp_Village",
      "FromFile": "Assets/Maps/DN.SnS_CirrusExteriorPatch.tmx",
      "ToArea": {
        "X": 49,
        "Y": 0,
        "Width": 17,
        "Height": 16
      },
    },
    /*
    // ADDS SHUDDERS TO THE BROKEN DOWN LION'S MANE
    {
      "Action": "EditMap",
      "Target": "Maps/EastScarp_Village",
      "MapTiles": [
        {
          "Position": {
            "X": 57,
            "Y": 4
          },
          "Layer": "Buildings",
          "SetProperties": {
            "Action": "Message BoardedDoor"
          }
        }
      ],
      "When": { "HasSeenEvent |contains=SnS.Ch3.Cirrus.13": false }
    },
    // PATCHES THE REPAIRED LION'S MANE
    {
      "LogName": "Lion's Mane (Repaired) One Door Patch",
      "Action": "EditMap",
      "Target": "Maps/EastScarp_Village",
      "FromFile": "Assets/Maps/LionsManeRepairedPatch.tmx",
      "ToArea": {
        "X": 50,
        "Y": 0,
        "Width": 12,
        "Height": 9
      },
      "MapTiles": [
        {
          "Position": { // RIGHT HAND DOOR
            "X": 57,
            "Y": 4
          },
          "Layer": "Buildings",
          "SetProperties": {
            "Action": "LockedDoorWarp 26 35 EastScarp_LionsMane 800 2400"
          }
        }
      ],
      "When": {
        "HasSeenEvent |contains=SnS.Ch3.Cirrus.12": true,
        "HasFlag |contains=Cirrus_SpecialOrders_LionsManeMail": true,
        "HasConversationTopic |contains=CirrusConcert": false,
        "LionsManeExtraDoorWarp:": false
      }
    },
    {
      "LogName": "Lion's Mane (Repaired) Two Door Patch",
      "Action": "EditMap",
      "Target": "Maps/EastScarp_Village",
      "FromFile": "Assets/Maps/LionsManeRepairedPatch.tmx",
      "ToArea": {
        "X": 50,
        "Y": 0,
        "Width": 12,
        "Height": 9
      },
      "MapTiles": [
        {
          "Position": { // RIGHT HAND DOOR
            "X": 57,
            "Y": 4
          },
          "Layer": "Buildings",
          "SetProperties": {
            "Action": "LockedDoorWarp 26 35 EastScarp_LionsMane 800 2400"
          }
        },
        {
          "Position": { // LEFT HAND DOOR
            "X": 55,
            "Y": 4
          },
          "Layer": "Buildings",
          "SetProperties": {
            "Action": "LockedDoorWarp 8 34 EastScarp_LionsMane 800 2400"
          }
        },
        {
          "Position": { // LEFT HAND DOOR
            "X": 54,
            "Y": 4
          },
          "Layer": "Buildings",
          "SetProperties": {
            "Action": "LockedDoorWarp 8 34 EastScarp_LionsMane 800 2400"
          }
        }
      ],
      "When": {
        "HasSeenEvent |contains=SnS.Ch3.Cirrus.12": true,
        "HasFlag |contains=Cirrus_SpecialOrders_LionsManeMail": true,
        "HasConversationTopic |contains=CirrusConcert": false,
        "LionsManeExtraDoorWarp:": true
      }
    },
    */
    // PATCHES THE LION'S MANE INTERIOR
    {
      "LogName": "Lion's Mane (No Dandelion) Patch",
      "Action": "EditMap",
      "Target": "Maps/EastScarp_LionsMane",
      "PatchMode": "Replace",
      "FromFile": "Assets/Maps/LionsManeFinalPatch_NoDandelion.tmx",
      "ToArea": {
        "X": 0,
        "Y": 0,
        "Width": 16,
        "Height": 40
      },
      "When": {
        "HasSeenEvent |contains=SnS.Ch4.Roslin.5": true,
        "HasSeenEvent |contains=SnS.Ch4.Roslin.6": false
      }
    },
    {
      "LogName": "Lion's Mane (Dandelion + Solomon) Patch",
      "Action": "EditMap",
      "Target": "Maps/EastScarp_LionsMane",
      "PatchMode": "Replace",
      "FromFile": "Assets/Maps/LionsManeFinalPatch_DandelionReturned.tmx",
      "ToArea": {
        "X": 0,
        "Y": 0,
        "Width": 16,
        "Height": 40
      },
      "When": {
        "HasSeenEvent |contains=SnS.Ch4.Roslin.5": true,
        "HasSeenEvent |contains=SnS.Ch4.Roslin.6": true
      }
    },
    // ADDS A LOCKED DOOR TO THE UNDERFORGE
    {
      "Action": "EditMap",
      "Target": "Maps/EastScarp_CoastalGuild",
      "MapTiles": [
        {
          "Position": {
            "X": 20,
            "Y": 13
          },
          "Layer": "Buildings",
          "SetProperties": {
            "Action": "Message UnderScarpe"
          }
        }
      ],
      "When": { "HasSeenEvent |contains=SnS.Ch1.Val.18": false }
    },
    // ADDS THE UNDERFORGE WARP FROM GUILD
    {
      "Action": "EditMap",
      "Target": "Maps/EastScarp_CoastalGuild",
      "MapTiles": [
        {
          "Position": {
            "X": 20,
            "Y": 13
          },
          "Layer": "Buildings",
          "SetProperties": {
            "Action": "Warp 24 5 EastScarp_Underforge"
          }
        }
      ],
      "When": { "HasSeenEvent |contains=SnS.Ch1.Val.18": true }
    },
    // ADDS THE UNDERFORGE WARP TO GUILD
    {
      "Action": "EditMap",
      "Target": "Maps/EastScarp_Underforge",
      "MapTiles": [
        {
          "Position": {
            "X": 24,
            "Y": 3
          },
          "Layer": "Buildings",
          "SetProperties": {
            "Action": "Warp 20 14 EastScarp_CoastalGuild"
          }
        }
      ]
    },
    // DEEP DARK WARPS
    {
      "LogName": "Deep Dark Entrance",
      "Action": "EditMap",
      "Target": "Maps/EastScarp_DeepDark",
      "FromFile": "Assets/Maps/DeepDarkPatch.tmx",
      "ToArea": {
        "X": 4,
        "Y": 8,
        "Width": 7,
        "Height": 5
      }
    },
    {
      "Action": "EditMap",
      "Target": "Maps/EastScarp_DeepDark",
      "MapTiles": [
        {
          "Position": {
            "X": 9,
            "Y": 11
          },
          "Layer": "Buildings",
          "SetProperties": {
            "Action": "Message DeepDarkNotReady"
          }
        }
      ],
      "When": { "HasSeenEvent |contains=SnS.Ch4.Dandelion.7": false }
    },
    {
      "Action": "EditMap",
      "Target": "Maps/EastScarp_DeepDark",
      "MapTiles": [
        {
          "Position": {
            "X": 9,
            "Y": 11
          },
          "Layer": "Buildings",
          "SetProperties": {
            "Action": "Warp 9 18 EastScarp_DeepDarkEntrance"
          }
        }
      ],
      "When": { "HasSeenEvent |contains=SnS.Ch4.Dandelion.7": true }
    },
    {
      "Action": "EditMap",
      "Target": "Maps/EastScarp_DeepDarkEntrance",
      "MapTiles": [
        {
          "Position": {
            "X": 9,
            "Y": 19
          },
          "Layer": "Buildings",
          "SetProperties": {
            "Action": "Warp 9 12 EastScarp_DeepDark"
          }
        }
      ]
    },
    {
      "Action": "EditMap",
      "Target": "Maps/EastScarp_DuskspireLair",
      "MapTiles": [
        {
          "Position": {
            "X": 3,
            "Y": 14
          },
          "Layer": "Buildings",
          "SetProperties": {
            "Action": "Warp 17 7 EastScarp_DeepDarkEntrance"
          }
        }
      ]
    },
    {
      "LogName": "Hector Final Dropbox pt.1",
      "Action": "EditMap",
      "Target": "Maps/EastScarp_DeepMountains",
      "FromFile": "Assets/Maps/DruidAltarEssencesPatch.tmx",
      "PatchMode": "Overlay",
      "Update": "OnLocationChange",
      "ToArea": {
        "X": 15,
        "Y": 11,
        "Width": 1,
        "Height": 2
      }
    },
    /*
    {
      "LogName": "Hector Final Dropbox pt.2",
      "Action": "EditMap",
      "Target": "Maps/EastScarp_DeepMountains",
      "FromFile": "Assets/Maps/DruidAltarEssencesPatch.tmx",
      "PatchMode": "Overlay",
      "Update": "OnLocationChange",
      "ToArea": {
        "X": 14,
        "Y": 15,
        "Width": 1,
        "Height": 2
      },
      "When": {
        "HasFlag |contains=HectorEssenceAltar2": true,
        "HasFlag |contains=Hector_SpecialOrders_River2": false
      }
    },
    // ADDS THE GROVE WARPS
    {
      "Action": "EditMap",
      "Target": "Maps/EastScarp_DruidTower",
      "MapTiles": [
        {
          "Position": {
            "X": 6,
            "Y": 16
          },
          "Layer": "Back",
          "SetProperties": {
            "TouchAction": "MagicWarp EastScarp_DruidGrove 16 69"
          }
        }
      ],
      "When": { "HasSeenEvent |contains=SnS.Ch2.Hector.16": true }
    },
    {
      "Action": "EditMap",
      "Target": "Maps/EastScarp_DruidGrove",
      "FromFile": "Assets/Maps/TrueGroveWarp.tmx",
      "PatchMode": "Overlay",
      "Update": "OnLocationChange",
      "ToArea": {
        "X": 15,
        "Y": 69,
        "Width": 3,
        "Height": 3
      },
      "When": { "HasSeenEvent |contains=SnS.Ch2.Hector.16": true }
    },
    {
      "Action": "EditMap",
      "Target": "Maps/EastScarp_DruidGrove",
      "MapTiles": [
        {
          "Position": {
            "X": 16,
            "Y": 70
          },
          "Layer": "Back",
          "SetProperties": {
            "TouchAction": "MagicWarp EastScarp_DruidTower 6 17"
          }
        }
      ],
      "When": { "HasSeenEvent |contains=SnS.Ch2.Hector.16": true }
    },
    */
    {
      "LogName": "Final Coastal Guild Patch",
      "Action": "EditMap",
      "Target": "Maps/EastScarp_CoastalGuild",
      "PatchMode": "Replace",
      "FromFile": "Assets/Maps/EastScarp_CoastalGuildFinal.tmx",
      "ToArea": {
        "X": 0,
        "Y": 0,
        "Width": 36,
        "Height": 21
      },
      "AddWarps": [
        "10 20 EastScarp_Village 93 94"
    ],
      "When": {
        "HasFlag |contains=Val_SpecialOrders_BuildGuildMail": true,
        "HasSeenEvent |contains=SnS.Ch5.Val": true
      }
    },
    /*
    {
      "Action": "EditMap",
      "Target": "Maps/EastScarp_DeepMountains",
      "FromFile": "Assets/Maps/HectorGladeWarp.tmx",
      "PatchMode": "Replace",
      "Update": "OnLocationChange",
      "ToArea": {
        "X": 19,
        "Y": 3,
        "Width": 4,
        "Height": 3
      },
      "When": { "HasSeenEvent |contains=SnS.Ch2.Hector.16": true }
    },
    {
      "Action": "EditMap",
      "Target": "Maps/EastScarp_DeepMountains",
      "MapTiles": [
        {
          "Position": {
            "X": 20,
            "Y": 4
          },
          "Layer": "Back",
          "SetProperties": {
            "TouchAction": "MagicWarp EastScarp_HectorForest 21 32"
          }
        }
      ],
      "When": { "HasSeenEvent |contains=SnS.Ch2.Hector.16": true }a
    }
      */
  ]
}